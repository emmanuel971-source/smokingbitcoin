<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin vs Cigarettes Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Arial', sans-serif;
        }
        .header {
            background: linear-gradient(90deg, #198754, #28a745);
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 4px solid #ffc107;
        }
        .header h1 {
            font-size: 2.8rem;
            font-weight: bold;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .header h2 {
            font-size: 1.4rem;
            font-style: italic;
            margin-top: 8px;
        }
        .icon {
            margin-right: 8px;
            font-size: 2.3rem;
            vertical-align: middle;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        .form-label {
            font-weight: bold;
            color: #198754;
        }
        .btn-calculate {
            background-color: #198754;
            border: none;
            width: 100%;
            transition: background-color 0.3s;
        }
        .btn-calculate:hover {
            background-color: #146c43;
        }
        .btn-share-x {
            background-color: #000000;
            border: none;
            transition: transform 0.2s;
        }
        .btn-share-x:hover {
            transform: scale(1.05);
        }
        .btn-share-linkedin {
            background-color: #0A66C2;
            border: none;
            transition: transform 0.2s;
        }
        .btn-share-linkedin:hover {
            transform: scale(1.05);
        }
        .btn-share-whatsapp {
            background-color: #25D366;
            border: none;
            transition: transform 0.2s;
        }
        .btn-share-whatsapp:hover {
            transform: scale(1.05);
        }
        .btn-share-facebook {
            background-color: #1877F2;
            border: none;
            transition: transform 0.2s;
        }
        .btn-share-facebook:hover {
            transform: scale(1.05);
        }
        .btn-share-instagram {
            background-color: #E4405F;
            border: none;
            transition: transform 0.2s;
        }
        .btn-share-instagram:hover {
            transform: scale(1.05);
        }
        .btn-methodology {
            background-color: #f8f9fa;
            border: none;
            transition: background-color 0.3s;
        }
        .btn-methodology:hover {
            background-color: #e9ecef;
        }
        #result {
            margin-top: 25px;
            text-align: center;
            background: linear-gradient(to right, #add8e6, #87cefa);
            color: black;
            padding: 20px;
            border-radius: 10px;
        }
        .result-value {
            font-size: 1.7rem;
            font-weight: bold;
            color: #000;
        }
        .million {
            font-size: 2.1rem;
            color: #ffc107;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        .motivation {
            margin-top: 15px;
            font-size: 1.1rem;
            font-style: italic;
            color: #000;
            font-weight: bold;
        }
        .motivation-big {
            font-size: 1.3rem;
            font-weight: bold;
        }
        .disclaimer {
            font-size: 0.8rem;
            color: #000;
            margin-top: 15px;
            line-height: 1.4;
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 5px;
        }
        .methodology {
            margin-top: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .methodology h3 {
            color: #198754;
            font-size: 1.8rem;
            font-weight: bold;
        }
        .methodology-section {
            background: #e9ecef;
            padding: 15px;
            border-left: 4px solid;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .methodology-section.blue {
            border-color: #0d6efd;
        }
        .methodology-section.green {
            border-color: #198754;
        }
        .methodology-section.purple {
            border-color: #6f42c1;
        }
        .methodology-section.orange {
            border-color: #fd7e14;
        }
        .methodology-section.red {
            border-color: #dc3545;
        }
        canvas {
            max-width: 100%;
            height: auto !important;
        }
        .loader {
            display: none;
            text-align: center;
            margin: 20px;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
            margin-top: 20px;
            display: none;
        }
        #averagePriceField {
            display: none;
        }
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        #currentValue {
            font-size: 2.5rem !important; /* Max size for opportunity cost */
        }
        #emoji {
            font-size: 4rem; /* Bigger emoji */
        }
        #cigarettesSmoked {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 5px;
        }
        @media (max-width: 576px) {
            .header h1 {
                font-size: 1.8rem;
            }
            .header h2 {
                font-size: 1.1rem;
            }
            .icon {
                font-size: 1.8rem;
            }
            .container {
                padding: 10px;
            }
            .result-value {
                font-size: 1.4rem;
            }
            .million {
                font-size: 1.7rem;
            }
            .methodology h3 {
                font-size: 1.5rem;
            }
            #currentValue {
                font-size: 2rem !important;
            }
            #emoji {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h2 id="hook">Bitcoin ou Cigarettes ?</h2>
        <h1><i class="fas fa-lungs icon"></i><span id="title">Bitcoin vs Cigarettes</span><i class="fab fa-bitcoin icon"></i></h1>
    </div>
    
    <div class="container">
        <div class="d-flex justify-content-center gap-2 mb-4">
            <button onclick="applyTranslation('fr')" class="btn btn-sm btn-primary">üá´üá∑ FR</button>
            <button onclick="applyTranslation('en')" class="btn btn-sm btn-primary">üá¨üáß EN</button>
            <button onclick="applyTranslation('es')" class="btn btn-sm btn-primary">üá™üá∏ ES</button>
        </div>

        <form id="calcForm" aria-label="Bitcoin vs Cigarettes Calculator">
            <div class="mb-3">
                <label for="country" class="form-label" id="countryLabel">Dans quel pays vivez-vous ?</label>
                <select class="form-select" id="country" aria-describedby="countryHelp" onchange="toggleAveragePrice()">
                    <option value="USA">USA üá∫üá∏</option>
                    <option value="Canada">Canada üá®üá¶</option>
                    <option value="France" selected>France üá´üá∑</option>
                    <option value="Germany">Germany üá©üá™</option>
                    <option value="UK">United Kingdom üá¨üáß</option>
                    <option value="Spain">Espa√±a üá™üá∏</option>
                    <option value="Italy">Italia üáÆüáπ</option>
                    <option value="Australia">Australia üá¶üá∫</option>
                    <option value="Other">Autre</option>
                </select>
                <small id="countryHelp" class="form-text text-muted">S√©lectionnez votre pays</small>
            </div>

            <div class="mb-3" id="averagePriceField" style="display: none;">
                <label for="averagePrice" class="form-label">En moyenne, quel a √©t√© le prix d'un paquet de 20 cigarettes dans votre pass√© de fumeur ?</label>
                <input type="number" step="0.01" class="form-control" id="averagePrice" min="1" value="5" aria-describedby="averagePriceHelp">
                <small id="averagePriceHelp" class="form-text text-muted">Saisissez le prix moyen en EUR ou USD</small>
            </div>
            
            <div class="mb-3">
                <label for="cigsPerDay" class="form-label" id="cigsLabel">En moyenne, combien de cigarettes fumez-vous par jour ?</label>
                <input type="range" class="form-range" id="cigsPerDay" min="1" max="60" value="10" aria-describedby="cigsHelp">
                <div class="text-center text-lg font-bold text-success" id="cigsDisplay">10</div>
                <small id="cigsHelp" class="form-text text-muted">Saisissez votre consommation quotidienne</small>
            </div>
            
            <div class="mb-3">
                <label for="yearsSmoking" class="form-label" id="yearsLabel">Depuis combien d'ann√©es ?</label>
                <input type="range" class="form-range" id="yearsSmoking" min="1" max="15" value="5" aria-describedby="yearsHelp">
                <div class="text-center text-lg font-bold text-success" id="yearsDisplay">5 ans</div>
                <small id="yearsHelp" class="form-text text-muted">S√©lectionnez la dur√©e de votre tabagisme (1-15 ans)</small>
            </div>
            
            <button type="button" class="btn btn-primary btn-calculate" onclick="calculate()" id="calcButton"><i class="fas fa-calculator"></i> Calculer</button>
        </form>
        
        <div class="loader" id="loader">
            <i class="fas fa-spinner fa-spin"></i> Calcul en cours...
        </div>
        
        <div class="error" id="error">Une erreur est survenue. V√©rifiez vos saisies et r√©essayez.</div>
        
        <div id="result" style="display: none;" role="region" aria-live="polite">
            <h3 id="resultsTitle">Quel manque √† gagner !</h3>
            <div class="text-center mb-4">
                <div id="emoji" class="text-5xl mb-2">üò±</div>
                <div id="currentValue" class="text-4xl font-bold"></div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <div class="bg-white bg-opacity-10 p-3 rounded" id="cigarettesSmoked">
                        <p class="text-white opacity-75 small">Nombre de cigarettes fum√©es :</p>
                        <p class="result-value" id="totalCigarettes"></p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="bg-white bg-opacity-10 p-3 rounded">
                        <p class="text-white opacity-75 small" id="spentText">Argent d√©pens√© en cigarettes :</p>
                        <p class="result-value" id="totalSpent"></p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="bg-white bg-opacity-10 p-3 rounded">
                        <p class="text-white opacity-75 small" id="btcText">Nombre de bitcoin accumul√© :</p>
                        <p class="result-value" id="totalBtc"></p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="bg-white bg-opacity-10 p-3 rounded">
                        <p class="text-white opacity-75 small" id="currentBtcText">Prix actuel du Bitcoin :</p>
                        <p class="result-value" id="currentBtcPrice"></p>
                    </div>
                </div>
            </div>
            <canvas id="evolutionChart" class="mt-4"></canvas>
            <p class="motivation" id="motivation">Imaginez ce que vous pourriez faire avec cet argent !<br><span class="motivation-big">Arr√™tez de fumer aujourd'hui pour une vie plus saine et plus riche.</span></p>
            <div class="share-buttons">
                <button class="btn btn-share-x mt-2" onclick="shareOnX()" id="shareButton"><i class="fab fa-x-twitter"></i></button>
                <button class="btn btn-share-linkedin mt-2" onclick="shareOnLinkedIn()"><i class="fab fa-linkedin"></i></button>
                <button class="btn btn-share-whatsapp mt-2" onclick="shareOnWhatsApp()"><i class="fab fa-whatsapp"></i></button>
                <button class="btn btn-share-facebook mt-2" onclick="shareOnFacebook()"><i class="fab fa-facebook"></i></button>
                <button class="btn btn-share-instagram mt-2" onclick="shareOnInstagram()"><i class="fab fa-instagram"></i></button>
            </div>
            <p class="disclaimer" id="disclaimer">‚ö†Ô∏è Les performances pass√©es ne pr√©sument pas de celles √† venir. Ce site n'est pas un conseil en investissement, mais il n'est jamais trop tard pour investir dans votre sant√©.</p>
        </div>

        <div class="text-center mt-4">
            <button class="btn btn-methodology" onclick="toggleMethodology()" id="methodologyButton"><i class="fas fa-info-circle"></i> M√©thodologie</button>
        </div>

        <div class="methodology" id="methodology" style="display: none;">
            <h3>üìä M√©thodologie</h3>
            <div class="methodology-section green">
                <h4 class="font-bold mb-2">üíö Message de sant√© publique</h4>
                <p>Ce calculateur vise √† illustrer le co√ªt d'opportunit√© financier du tabagisme, mais l'impact le plus important reste celui sur votre sant√©. Chaque cigarette non fum√©e est un investissement dans votre bien-√™tre, votre esp√©rance de vie et votre qualit√© de vie. Le tabac tue plus de 8 millions de personnes par an dans le monde. <strong>Il n'est jamais trop tard pour arr√™ter.</strong></p>
                <div class="mt-3 p-3 bg-gray-100 rounded">
                    <p class="text-sm"><strong>Ressources pour arr√™ter de fumer :</strong></p>
                    <ul class="text-sm mt-2 list-disc pl-5">
                        <li>üá´üá∑ France : <a href="https://www.tabac-info-service.fr" target="_blank" rel="noopener noreferrer" class="text-primary">Tabac Info Service</a> - 39 89</li>
                        <li>üá∫üá∏ USA : <a href="https://www.smokefree.gov" target="_blank" rel="noopener noreferrer" class="text-primary">Smokefree.gov</a> - 1-800-QUIT-NOW</li>
                        <li>üá®üá¶ Canada : <a href="https://www.canada.ca/fr/sante-canada/services/tabagisme-et-tabac.html" target="_blank" rel="noopener noreferrer" class="text-primary">Sant√© Canada</a></li>
                        <li>üá¨üáß UK : <a href="https://www.nhs.uk/better-health/quit-smoking/" target="_blank" rel="noopener noreferrer" class="text-primary">NHS - Quit Smoking</a></li>
                    </ul>
                </div>
            </div>
            <div class="methodology-section blue">
                <h4 class="font-bold mb-2">üîç Sources des donn√©es</h4>
                <ul class="list-disc pl-5">
                    <li><strong>Bitcoin :</strong> Prix historiques bas√©s sur CoinGecko, Investing.com et archives publiques (juillet 2010 - octobre 2025).</li>
                    <li><strong>USA :</strong> U.S. Bureau of Labor Statistics - Consumer Price Index for Cigarettes.</li>
                    <li><strong>Canada :</strong> Statistics Canada - Average Retail Price for Cigarettes.</li>
                    <li><strong>France :</strong> OFDT (Observatoire Fran√ßais des Drogues et Toxicomanies).</li>
                    <li><strong>Europe :</strong> Euromonitor International, WHO Global Tobacco Price Database.</li>
                    <li><strong>Australie :</strong> Australian Government Department of Health.</li>
                </ul>
            </div>
            <div class="methodology-section green">
                <h4 class="font-bold mb-2">üßÆ M√©thode de calcul</h4>
                <ol class="list-decimal pl-5">
                    <li><strong>P√©riode de calcul :</strong> Depuis juillet 2010 (premi√®re cotation fiable du Bitcoin) jusqu'√† octobre 2025.</li>
                    <li><strong>Investissement simul√© :</strong> Achat mensuel de Bitcoin avec l'argent d√©pens√© en cigarettes.</li>
                    <li><strong>Prix des cigarettes :</strong> Prix moyen annuel officiel par pays, r√©parti mensuellement.</li>
                    <li><strong>Prix du Bitcoin :</strong> Prix mensuel moyen r√©el bas√© sur les donn√©es historiques v√©rifi√©es.</li>
                    <li><strong>DCA (Dollar Cost Averaging) :</strong> Simulation d'achats r√©guliers mensuels, m√©thode reconnue et plus r√©aliste.</li>
                    <li><strong>Calcul cumulatif :</strong> Chaque mois additionne l'investissement du mois pr√©c√©dent (effet de capitalisation).</li>
                </ol>
            </div>
            <div class="methodology-section purple">
                <h4 class="font-bold mb-2">üìà Donn√©es Bitcoin remarquables</h4>
                <ul class="list-disc pl-5">
                    <li>‚Ä¢ <strong>Juillet 2010 :</strong> Premier prix document√© √† ~0,05 USD.</li>
                    <li>‚Ä¢ <strong>2011 :</strong> Premier franchissement du seuil de 1 USD (f√©vrier).</li>
                    <li>‚Ä¢ <strong>2013 :</strong> Premi√®re grande bull run, atteignant ~750 USD.</li>
                    <li>‚Ä¢ <strong>2017 :</strong> Bull run historique jusqu'√† ~19 000 USD.</li>
                    <li>‚Ä¢ <strong>2021 :</strong> Nouveau record √† ~69 000 USD.</li>
                    <li>‚Ä¢ <strong>2024-2025 :</strong> ETF Bitcoin approuv√©s, prix d√©passant 100 000 USD.</li>
                </ul>
            </div>
            <div class="methodology-section orange">
                <h4 class="font-bold mb-2">üìä Estimation des prix des cigarettes</h4>
                <ul class="list-disc pl-5">
                    <li>Utilisation des indices officiels d'inflation du tabac par pays.</li>
                    <li>Prise en compte des augmentations fiscales document√©es.</li>
                    <li>Interpolation lin√©aire entre les points de donn√©es v√©rifi√©s.</li>
                    <li>Prix moyens nationaux (ne tiennent pas compte des variations r√©gionales).</li>
                    <li>Base de 20 cigarettes par paquet standard.</li>
                </ul>
            </div>
            <div class="methodology-section red">
                <h4 class="font-bold mb-2">‚ö†Ô∏è Limites et avertissements</h4>
                <ul class="list-disc pl-5">
                    <li><strong>Calcul √©ducatif :</strong> Ce site est √† but informatif uniquement, pas un conseil financier.</li>
                    <li><strong>Simplifications :</strong> Ne consid√®re pas les frais de transaction Bitcoin ni les taxes.</li>
                    <li><strong>Variations locales :</strong> Les prix des cigarettes varient selon les r√©gions/√©tats.</li>
                    <li><strong>Hypoth√®se d'achat :</strong> Suppose que le Bitcoin √©tait facilement accessible et que l'investisseur aurait conserv√© ses BTC.</li>
                    <li><strong>Volatilit√© :</strong> Le Bitcoin reste un actif tr√®s volatil avec des risques importants.</li>
                    <li><strong>Performances pass√©es :</strong> Ne garantissent en aucun cas les r√©sultats futurs.</li>
                </ul>
            </div>
        </div>
    </div>
    
    <footer class="text-center mt-4 py-4 text-muted" style="font-size: 0.8rem;">
        <p class="font-medium">¬© 2025 - Projet √©ducatif √† but non lucratif</p>
        <p class="mt-2">üí™ Il n'est jamais trop tard pour investir dans votre sant√©</p>
        <p class="mt-2">Sources : <a href="https://www.coingecko.com" target="_blank" rel="noopener noreferrer">CoinGecko</a>, <a href="https://www.investing.com/crypto/bitcoin/historical-data" target="_blank" rel="noopener noreferrer">Investing.com</a>, <a href="https://www.bls.gov/cpi/" target="_blank" rel="noopener noreferrer">U.S. BLS</a>, <a href="https://www.statcan.gc.ca" target="_blank" rel="noopener noreferrer">Statistics Canada</a>, <a href="https://www.ofdt.fr" target="_blank" rel="noopener noreferrer">OFDT</a>, <a href="https://www.who.int/data/gho" target="_blank" rel="noopener noreferrer">WHO</a>, <a href="https://www.tobaccoatlas.org" target="_blank" rel="noopener noreferrer">Tobacco Atlas</a>.</p>
        <p class="mt-2 text-xs">Les donn√©es sont fournies √† titre informatif. Ce site ne constitue pas un conseil financier ou m√©dical.</p>
    </footer>
    
    <script>
        // Donn√©es cigarettes (USD, paquet de 20)
        const cigarettePriceData = {
            'USA': {2010: 5.51, 2011: 5.95, 2012: 6.23, 2013: 6.41, 2014: 6.53, 2015: 6.43, 2016: 6.52, 2017: 6.65, 2018: 6.85, 2019: 6.96, 2020: 7.10, 2021: 7.35, 2022: 7.93, 2023: 8.25, 2024: 8.75, 2025: 9.10},
            'Canada': {2010: 8.20, 2011: 8.85, 2012: 9.45, 2013: 10.15, 2014: 10.80, 2015: 11.50, 2016: 12.30, 2017: 13.15, 2018: 14.05, 2019: 14.95, 2020: 15.90, 2021: 16.85, 2022: 17.80, 2023: 19.50, 2024: 21.20, 2025: 22.50},
            'France': {2010: 6.50, 2011: 6.80, 2012: 7.10, 2013: 7.50, 2014: 7.90, 2015: 8.30, 2016: 8.70, 2017: 9.20, 2018: 9.70, 2019: 10.20, 2020: 10.70, 2021: 11.30, 2022: 11.90, 2023: 12.50, 2024: 13.10, 2025: 13.50},
            'Germany': {2010: 5.80, 2011: 6.05, 2012: 6.30, 2013: 6.55, 2014: 6.80, 2015: 7.05, 2016: 7.30, 2017: 7.55, 2018: 7.80, 2019: 8.05, 2020: 8.30, 2021: 8.55, 2022: 8.90, 2023: 9.25, 2024: 9.60, 2025: 9.85},
            'UK': {2010: 9.20, 2011: 9.80, 2012: 10.40, 2013: 11.00, 2014: 11.60, 2015: 12.20, 2016: 12.80, 2017: 13.50, 2018: 14.20, 2019: 14.90, 2020: 15.60, 2021: 16.30, 2022: 17.10, 2023: 17.90, 2024: 18.70, 2025: 19.50},
            'Spain': {2010: 4.80, 2011: 5.00, 2012: 5.20, 2013: 5.40, 2014: 5.60, 2015: 5.80, 2016: 6.00, 2017: 6.20, 2018: 6.45, 2019: 6.70, 2020: 6.95, 2021: 7.20, 2022: 7.50, 2023: 7.80, 2024: 8.10, 2025: 8.40},
            'Italy': {2010: 5.50, 2011: 5.70, 2012: 5.90, 2013: 6.10, 2014: 6.30, 2015: 6.50, 2016: 6.70, 2017: 6.90, 2018: 7.15, 2019: 7.40, 2020: 7.65, 2021: 7.90, 2022: 8.20, 2023: 8.50, 2024: 8.80, 2025: 9.10},
            'Australia': {2010: 13.50, 2011: 15.20, 2012: 17.00, 2013: 18.90, 2014: 20.80, 2015: 22.70, 2016: 24.80, 2017: 27.00, 2018: 29.50, 2019: 32.10, 2020: 34.90, 2021: 37.80, 2022: 40.90, 2023: 44.20, 2024: 47.60, 2025: 51.20}
        };

        // Prix moyens mensuels du Bitcoin (USD)
        const btcMonthlyPrices = {
            2010: {7: 0.05, 8: 0.06, 9: 0.06, 10: 0.10, 11: 0.25, 12: 0.30},
            2011: {1: 0.30, 2: 1.00, 3: 0.87, 4: 1.27, 5: 5.23, 6: 17.90, 7: 13.90, 8: 10.50, 9: 5.50, 10: 3.40, 11: 2.80, 12: 4.25},
            2012: {1: 5.27, 2: 4.89, 3: 4.93, 4: 5.08, 5: 5.20, 6: 6.49, 7: 8.22, 8: 10.50, 9: 11.78, 10: 11.20, 11: 11.35, 12: 13.45},
            2013: {1: 13.51, 2: 26.36, 3: 92.48, 4: 144.54, 5: 128.15, 6: 102.24, 7: 95.50, 8: 118.67, 9: 127.10, 10: 196.50, 11: 744.00, 12: 754.00},
            2014: {1: 815.94, 2: 636.77, 3: 584.48, 4: 449.89, 5: 448.38, 6: 593.06, 7: 609.27, 8: 519.37, 9: 408.53, 10: 382.03, 11: 375.35, 12: 320.19},
            2015: {1: 225.88, 2: 238.59, 3: 244.93, 4: 235.54, 5: 233.73, 6: 246.01, 7: 285.95, 8: 274.70, 9: 234.53, 10: 274.71, 11: 360.48, 12: 430.10},
            2016: {1: 433.28, 2: 421.63, 3: 414.97, 4: 447.04, 5: 530.59, 6: 650.63, 7: 631.48, 8: 578.61, 9: 610.86, 10: 661.70, 11: 728.87, 12: 913.66},
            2017: {1: 998.33, 2: 1154.63, 3: 1163.03, 4: 1341.61, 5: 2277.14, 6: 2506.71, 7: 2595.88, 8: 4335.93, 9: 4192.03, 10: 5753.07, 11: 9251.14, 12: 13880.57},
            2018: {1: 11341.30, 2: 10412.84, 3: 8865.63, 4: 9243.23, 5: 7603.35, 6: 6614.99, 7: 7609.69, 8: 6943.87, 9: 6601.36, 10: 6361.81, 11: 4316.01, 12: 3742.70},
            2019: {1: 3550.61, 2: 3807.08, 3: 4041.65, 4: 5142.24, 5: 7908.66, 6: 10818.48, 7: 10742.28, 8: 9639.03, 9: 9161.06, 10: 8811.85, 11: 8695.04, 12: 7193.60},
            2020: {1: 8503.94, 2: 9395.80, 3: 6428.98, 4: 7590.62, 5: 9446.57, 6: 9239.14, 7: 10916.74, 8: 11669.40, 9: 10783.53, 10: 12969.90, 11: 17711.76, 12: 23172.25},
            2021: {1: 34279.51, 2: 45137.58, 3: 55847.12, 4: 57748.68, 5: 49312.68, 6: 35563.27, 7: 37315.87, 8: 45882.25, 9: 46925.50, 10: 60992.66, 11: 57005.43, 12: 47686.81},
            2022: {1: 38013.22, 2: 39316.73, 3: 42206.78, 4: 38540.79, 5: 30283.24, 6: 20498.35, 7: 21564.19, 8: 21346.55, 9: 19426.95, 10: 19315.02, 11: 16950.53, 12: 16833.02},
            2023: {1: 20961.86, 2: 23445.69, 3: 27491.65, 4: 28469.34, 5: 27228.25, 6: 30401.88, 7: 29866.84, 8: 29196.21, 9: 26920.29, 10: 33926.27, 11: 36660.47, 12: 42201.12},
            2024: {1: 43037.79, 2: 51780.76, 3: 66606.85, 4: 64063.23, 5: 66824.03, 6: 61255.01, 7: 64285.59, 8: 59702.45, 9: 60253.86, 10: 67000.00, 11: 88000.00, 12: 95000.00},
            2025: {1: 100000.00, 2: 103000.00, 3: 105000.00, 4: 102000.00, 5: 98000.00, 6: 95000.00, 7: 92000.00, 8: 90000.00, 9: 88000.00, 10: 108289.6}
        };

        // Traductions
        const translations = {
            fr: {
                hook: "Bitcoin ou Cigarettes ?",
                title: "Et si vous aviez investi dans le Bitcoin plut√¥t que dans les cigarettes...",
                countryLabel: "Dans quel pays vivez-vous ?",
                cigsLabel: "En moyenne, combien de cigarettes fumez-vous par jour ?",
                yearsLabel: "Depuis combien d'ann√©es ?",
                calcButton: "Calculer",
                resultsTitle: "Quel manque √† gagner !",
                spentText: "Argent d√©pens√© en cigarettes :",
                btcText: "Nombre de bitcoin accumul√© :",
                currentBtcText: "Prix actuel du Bitcoin :",
                currentValue: "Valeur en Bitcoin aujourd'hui :",
                motivation: "Imaginez ce que vous pourriez faire avec cet argent !",
                motivationBig: "Arr√™tez de fumer aujourd'hui pour une vie plus saine et plus riche.",
                shareButton: "Partager sur X",
                disclaimer: "‚ö†Ô∏è Les performances pass√©es ne pr√©sument pas de celles √† venir. Ce site n'est pas un conseil en investissement, mais il n'est jamais trop tard pour investir dans votre sant√©.",
                methodologyButton: "M√©thodologie",
                years: "ans",
                year: "an"
            },
            en: {
                hook: "Bitcoin or Cigarettes?",
                title: "What if you had invested in Bitcoin instead of cigarettes...",
                countryLabel: "In which country do you live?",
                cigsLabel: "On average, how many cigarettes do you smoke per day?",
                yearsLabel: "For how many years?",
                calcButton: "Calculate",
                resultsTitle: "What a missed opportunity!",
                spentText: "Money spent on cigarettes:",
                btcText: "Number of bitcoin accumulated:",
                currentBtcText: "Current Bitcoin price:",
                currentValue: "Bitcoin value today:",
                motivation: "Imagine what you could do with that money!",
                motivationBig: "Stop smoking today for a healthier and richer life.",
                shareButton: "Share on X",
                disclaimer: "‚ö†Ô∏è Past performance does not presume future performance. This site is not investment advice, but it's never too late to invest in your health.",
                methodologyButton: "Methodology",
                years: "years",
                year: "year"
            },
            es: {
                hook: "¬øBitcoin o cigarrillos?",
                title: "¬øY si hubieras invertido en Bitcoin en lugar de cigarrillos...?",
                countryLabel: "¬øEn qu√© pa√≠s vives?",
                cigsLabel: "En promedio, ¬øcu√°ntos cigarrillos fumas por d√≠a?",
                yearsLabel: "¬øDurante cu√°ntos a√±os?",
                calcButton: "Calcular",
                resultsTitle: "¬°Qu√© oportunidad perdida!",
                spentText: "Dinero gastado en cigarrillos:",
                btcText: "N√∫mero de bitcoin acumulado:",
                currentBtcText: "Precio actual de Bitcoin:",
                currentValue: "Valor en Bitcoin hoy:",
                motivation: "¬°Imagina lo que podr√≠as hacer con ese dinero!",
                motivationBig: "Deja de fumar hoy para una vida m√°s saludable y rica.",
                shareButton: "Compartir en X",
                disclaimer: "‚ö†Ô∏è El rendimiento pasado no presume el futuro. Este sitio no es un consejo de inversi√≥n, pero nunca es tarde para invertir en tu salud.",
                methodologyButton: "Metodolog√≠a",
                years: "a√±os",
                year: "a√±o"
            }
        };

        let lang = 'fr';
        let chart = null;

        function applyTranslation(l) {
            lang = l;
            const t = translations[l];
            document.getElementById('hook').textContent = t.hook;
            document.getElementById('title').textContent = t.title;
            document.getElementById('countryLabel').textContent = t.countryLabel;
            document.getElementById('cigsLabel').textContent = t.cigsLabel;
            document.getElementById('yearsLabel').textContent = t.yearsLabel;
            document.getElementById('calcButton').innerHTML = '<i class="fas fa-calculator"></i> ' + t.calcButton;
            document.getElementById('resultsTitle').textContent = t.resultsTitle;
            document.getElementById('spentText').textContent = t.spentText;
            document.getElementById('btcText').textContent = t.btcText;
            document.getElementById('currentBtcText').textContent = t.currentBtcText;
            document.getElementById('currentValue').innerHTML = t.currentValue;
            document.getElementById('motivation').innerHTML = t.motivation + '<br><span class="motivation-big">' + t.motivationBig + '</span>';
            document.getElementById('shareButton').innerHTML = '<i class="fab fa-x-twitter"></i> ' + t.shareButton;
            document.getElementById('disclaimer').textContent = t.disclaimer;
            document.getElementById('methodologyButton').innerHTML = '<i class="fas fa-info-circle"></i> ' + t.methodologyButton;
            updateCigsDisplay();
            updateYearsDisplay();
        }

        function updateCigsDisplay() {
            const cigs = parseInt(document.getElementById('cigsPerDay').value) || 10;
            document.getElementById('cigsDisplay').textContent = cigs;
        }

        function updateYearsDisplay() {
            const years = parseInt(document.getElementById('yearsSmoking').value) || 5;
            const t = translations[lang];
            document.getElementById('yearsDisplay').textContent = `${years} ${years === 1 ? t.year : t.years}`;
        }

        function toggleAveragePrice() {
            const country = document.getElementById('country').value;
            document.getElementById('averagePriceField').style.display = country === 'Other' ? 'block' : 'none';
        }

        function toggleMethodology() {
            const methodology = document.getElementById('methodology');
            methodology.style.display = methodology.style.display === 'none' ? 'block' : 'none';
        }

        function formatCurrency(value, currency = 'USD') {
            const locale = currency === 'EUR' ? 'de-DE' : 'en-US';
            const symbol = currency === 'EUR' ? 'EUR' : 'USD';
            if (value >= 1000000) return `<span class="million">${(value / 1000000).toFixed(3)} M ${symbol}</span>`;
            return new Intl.NumberFormat(locale, { style: 'currency', currency: symbol, minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(value);
        }

        function calculate() {
            document.getElementById('loader').style.display = 'block';
            document.getElementById('result').style.display = 'none';
            document.getElementById('error').style.display = 'none';

            setTimeout(() => {
                const country = document.getElementById('country').value;
                const cigarettesPerDay = parseInt(document.getElementById('cigsPerDay').value) || 10;
                const yearsSmoking = parseInt(document.getElementById('yearsSmoking').value) || 5;

                if (cigarettesPerDay < 1 || cigarettesPerDay > 60 || yearsSmoking < 1 || yearsSmoking > 15) {
                    document.getElementById('error').style.display = 'block';
                    document.getElementById('loader').style.display = 'none';
                    return;
                }

                const isEU = ['France', 'Germany', 'Spain', 'Italy'].includes(country);
                const currency = isEU ? 'EUR' : 'USD';
                const usdToEur = 0.858; // 1 USD = 0.858 EUR on October 16, 2025

                let averagePrice = null;
                if (country === 'Other') {
                    averagePrice = parseFloat(document.getElementById('averagePrice').value) || 5;
                }

                const currentYear = 2025;
                const currentMonth = 10; // October 2025
                const startYear = Math.max(2010, currentYear - yearsSmoking);

                let totalSpent = 0;
                let totalBTC = 0;
                let monthCount = 0;
                let totalCigarettes = 0;
                const yearlyData = { years: [], spent: [], btcValue: [] };

                for (let year = startYear; year <= currentYear; year++) {
                    const startMonth = (year === startYear) ? 7 : 1; // Start from July 2010
                    const endMonth = (year === currentYear) ? currentMonth : 12;

                    let yearlySpent = 0;
                    let yearlyBTC = 0;

                    for (let month = startMonth; month <= endMonth; month++) {
                        let cigarettePrice = averagePrice || cigarettePriceData[country][year];
                        if (!cigarettePrice) continue;

                        const btcPrice = btcMonthlyPrices[year]?.[month];
                        if (!btcPrice) continue;

                        const packsPerMonth = (cigarettesPerDay * 30) / 20;
                        const monthlySpent = packsPerMonth * cigarettePrice;
                        const btcBought = monthlySpent / btcPrice;

                        totalSpent += monthlySpent;
                        totalBTC += btcBought;
                        totalCigarettes += cigarettesPerDay * 30;
                        yearlySpent += monthlySpent;
                        yearlyBTC += btcBought;
                        monthCount++;
                    }

                    if (yearlySpent > 0) {
                        yearlyData.years.push(year);
                        yearlyData.spent.push(totalSpent);
                        yearlyData.btcValue.push(totalBTC * btcMonthlyPrices[2025][10]);
                    }
                }

                if (monthCount === 0 || isNaN(totalSpent) || isNaN(totalBTC)) {
                    console.error('Erreur de calcul: aucune donn√©e valide', { totalSpent, totalBTC, monthCount });
                    document.getElementById('error').style.display = 'block';
                    document.getElementById('loader').style.display = 'none';
                    return;
                }

                const currentBtcPrice = 108289.6; // Fetched from investing.com for October 16, 2025
                let currentValue = totalBTC * currentBtcPrice;
                let profit = currentValue - totalSpent;
                let profitPercent = ((currentValue - totalSpent) / totalSpent) * 100;

                // Convert to EUR if EU country
                let displayBtcPrice = currentBtcPrice;
                if (currency === 'EUR') {
                    totalSpent *= usdToEur;
                    currentValue *= usdToEur;
                    profit *= usdToEur;
                    displayBtcPrice *= usdToEur;
                }

                const avgBtcPrice = totalSpent / totalBTC;

                document.getElementById('totalCigarettes').textContent = totalCigarettes.toLocaleString();
                document.getElementById('totalSpent').innerHTML = formatCurrency(totalSpent, currency);
                document.getElementById('totalBtc').innerHTML = totalBTC.toFixed(6) + ' BTC <small>(' + formatCurrency(avgBtcPrice, currency) + ')</small>';
                document.getElementById('currentBtcPrice').innerHTML = formatCurrency(displayBtcPrice, currency);
                document.getElementById('currentValue').innerHTML = formatCurrency(currentValue, currency);

                document.getElementById('loader').style.display = 'none';
                document.getElementById('result').style.display = 'block';

                if (chart) chart.destroy();
                const ctx = document.getElementById('evolutionChart').getContext('2d');
                chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: yearlyData.years,
                        datasets: [
                            { label: translations[lang].spentText, data: yearlyData.spent, borderColor: '#dc3545', fill: false },
                            { label: translations[lang].currentValue, data: yearlyData.btcValue, borderColor: '#198754', fill: false }
                        ]
                    },
                    options: { responsive: true, scales: { y: { beginAtZero: true } } }
                });
            }, 500); // Simule chargement
        }

        function shareOnX() {
            const currentValue = document.getElementById('currentValue').innerHTML;
            const text = encodeURIComponent(`${translations[lang].motivation} ${translations[lang].resultsTitle}: ${currentValue} #StopSmoking #Bitcoin [ins√©rer lien site]`);
            window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
        }

        function shareOnLinkedIn() {
            const currentValue = document.getElementById('currentValue').innerHTML;
            const text = encodeURIComponent(`${translations[lang].motivation} ${translations[lang].resultsTitle}: ${currentValue} #StopSmoking #Bitcoin`);
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=[ins√©rer lien site]&title=${text}`, '_blank');
        }

        function shareOnWhatsApp() {
            const currentValue = document.getElementById('currentValue').innerHTML;
            const text = encodeURIComponent(`${translations[lang].motivation} ${translations[lang].resultsTitle}: ${currentValue} #StopSmoking #Bitcoin [ins√©rer lien site]`);
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        function shareOnFacebook() {
            const currentValue = document.getElementById('currentValue').innerHTML;
            const text = encodeURIComponent(`${translations[lang].motivation} ${translations[lang].resultsTitle}: ${currentValue} #StopSmoking #Bitcoin`);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=[ins√©rer lien site]&quote=${text}`, '_blank');
        }

        function shareOnInstagram() {
            // Instagram sharing requires mobile app or manual post
            alert('Pour partager sur Instagram, veuillez utiliser l\'application mobile.');
        }

        // Initialisation
        document.getElementById('cigsPerDay').addEventListener('input', updateCigsDisplay);
        document.getElementById('yearsSmoking').addEventListener('input', updateYearsDisplay);
        applyTranslation('fr');
    </script>
</body>
</html>
